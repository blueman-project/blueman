#!@PYTHON@
import sys
import os
import logging
import gettext

# support running uninstalled
_dirname = os.path.abspath(os.path.join(os.path.dirname(__file__), ".."))
if 'BLUEMAN_SOURCE' in os.environ:
    sys.path = [_dirname, os.path.join(_dirname, 'module', '.libs')] + sys.path
    os.environ["GSETTINGS_SCHEMA_DIR"] = os.path.join(_dirname, "data")

gettext.textdomain("@GETTEXT_PACKAGE@")

from blueman.Functions import create_logger, create_parser, set_proc_title
from blueman.main.Applet import BluemanApplet


if __name__ == '__main__':
    parser = create_parser()
    args = parser.parse_args()
    log_level = logging.getLevelName(args.LEVEL.upper())
    create_logger(log_level, "blueman-applet", syslog=args.syslog)

    set_proc_title()
    app = BluemanApplet()
    app.run()
